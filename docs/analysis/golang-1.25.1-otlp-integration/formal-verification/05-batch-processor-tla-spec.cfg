\* TLA+ Model Checking Configuration for BatchSpanProcessor
\* 
\* This configuration file is used with TLC Model Checker to verify
\* the BatchSpanProcessor specification.
\*
\* Author: OTLP_go Project Team
\* Date: 2025-10-02

SPECIFICATION Spec

\* ============================================================================
\* CONSTANTS
\* ============================================================================

CONSTANTS
    MaxQueueSize = 3
    MaxBatchSize = 2
    NumSpans = 5
    Timeout = 3

\* ============================================================================
\* INVARIANTS (Safety Properties)
\* ============================================================================

INVARIANTS
    TypeInvariant
    NoExportedAndDropped
    QueueBounded
    BatchBounded
    QueueNoDuplicates
    BatchNoDuplicates
    Safety
    DeadlockFree

\* ============================================================================
\* PROPERTIES (Liveness Properties)
\* ============================================================================

PROPERTIES
    EventuallyProcessed
    TimeoutRespected

\* ============================================================================
\* STATE CONSTRAINTS (for model checking efficiency)
\* ============================================================================

\* Limit state space by bounding clock
CONSTRAINT clock <= 20

\* ============================================================================
\* VIEW (symmetry reduction)
\* ============================================================================

\* Treat span IDs as interchangeable for symmetry reduction
\* VIEW <<Len(queue), Len(batch), Cardinality(exported), Cardinality(dropped)>>

\* ============================================================================
\* ACTION CONSTRAINTS (optional)
\* ============================================================================

\* No constraints on actions

\* ============================================================================
\* NOTES
\* ============================================================================

\*
\* To run this model:
\*
\* 1. Install TLA+ Toolbox from: https://lamport.azurewebsites.net/tla/toolbox.html
\*
\* 2. Open the specification file: BatchSpanProcessor.tla
\*
\* 3. Create a new model with this configuration
\*
\* 4. Run TLC Model Checker
\*
\* Expected Results:
\*   - All invariants should hold
\*   - All properties should be satisfied
\*   - Model checking should complete in < 1 minute
\*
\* State Space Statistics (approximate):
\*   - Distinct states: ~10,000
\*   - Depth: ~15
\*   - Time: ~30 seconds (on modern CPU)
\*

