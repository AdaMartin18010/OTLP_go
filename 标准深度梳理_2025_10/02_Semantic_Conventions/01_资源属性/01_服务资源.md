# æœåŠ¡èµ„æºå±æ€§ (Service Resource Attributes)

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
> **OpenTelemetry ç‰ˆæœ¬**: v1.32.0  
> **è¯­ä¹‰çº¦å®šç‰ˆæœ¬**: v1.28.0  
> **æœ€åæ›´æ–°**: 2025å¹´10æœˆ9æ—¥

---

## ğŸ“‹ ç›®å½•

- [æœåŠ¡èµ„æºå±æ€§ (Service Resource Attributes)](#æœåŠ¡èµ„æºå±æ€§-service-resource-attributes)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [æ¦‚è¿°](#æ¦‚è¿°)
    - [æœåŠ¡èµ„æºçš„å®šä¹‰](#æœåŠ¡èµ„æºçš„å®šä¹‰)
    - [ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡èµ„æºå±æ€§?](#ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡èµ„æºå±æ€§)
  - [æ ¸å¿ƒå±æ€§](#æ ¸å¿ƒå±æ€§)
    - [1. å¿…éœ€å±æ€§](#1-å¿…éœ€å±æ€§)
    - [2. æ¨èå±æ€§](#2-æ¨èå±æ€§)
    - [3. å®Œæ•´å±æ€§åˆ—è¡¨](#3-å®Œæ•´å±æ€§åˆ—è¡¨)
  - [å±æ€§è¯¦è§£](#å±æ€§è¯¦è§£)
    - [1. service.name (å¿…éœ€)](#1-servicename-å¿…éœ€)
    - [2. service.namespace](#2-servicenamespace)
    - [3. service.version](#3-serviceversion)
    - [4. service.instance.id](#4-serviceinstanceid)
  - [Go å®ç°](#go-å®ç°)
    - [1. åŸºç¡€å®ç°](#1-åŸºç¡€å®ç°)
    - [2. ä»ç¯å¢ƒå˜é‡é…ç½®](#2-ä»ç¯å¢ƒå˜é‡é…ç½®)
    - [3. Kubernetes é›†æˆ](#3-kubernetes-é›†æˆ)
  - [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
    - [1. æœåŠ¡å‘½åè§„èŒƒ](#1-æœåŠ¡å‘½åè§„èŒƒ)
    - [2. ç‰ˆæœ¬ç®¡ç†](#2-ç‰ˆæœ¬ç®¡ç†)
    - [3. å®ä¾‹ ID ç”Ÿæˆ](#3-å®ä¾‹-id-ç”Ÿæˆ)
  - [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
    - [Q1: service.name å’Œåº”ç”¨ç¨‹åºåç§°çš„åŒºåˆ«?](#q1-servicename-å’Œåº”ç”¨ç¨‹åºåç§°çš„åŒºåˆ«)
    - [Q2: æ˜¯å¦å¿…é¡»è®¾ç½® service.namespace?](#q2-æ˜¯å¦å¿…é¡»è®¾ç½®-servicenamespace)
    - [Q3: service.instance.id åº”è¯¥å¦‚ä½•ä¿æŒç¨³å®š?](#q3-serviceinstanceid-åº”è¯¥å¦‚ä½•ä¿æŒç¨³å®š)
    - [Q4: å¦‚ä½•å¤„ç†æœåŠ¡åç§°å˜æ›´?](#q4-å¦‚ä½•å¤„ç†æœåŠ¡åç§°å˜æ›´)
  - [å‚è€ƒèµ„æº](#å‚è€ƒèµ„æº)
    - [å®˜æ–¹æ–‡æ¡£](#å®˜æ–¹æ–‡æ¡£)
    - [ç›¸å…³è§„èŒƒ](#ç›¸å…³è§„èŒƒ)

---

## æ¦‚è¿°

### æœåŠ¡èµ„æºçš„å®šä¹‰

**å½¢å¼åŒ–å®šä¹‰**:

```text
Service = (ServiceName, ServiceNamespace, ServiceVersion, ServiceInstanceId)

å…¶ä¸­:
- ServiceName: æœåŠ¡é€»è¾‘åç§° (å¿…éœ€)
- ServiceNamespace: æœåŠ¡å‘½åç©ºé—´ (å¯é€‰)
- ServiceVersion: æœåŠ¡ç‰ˆæœ¬å· (æ¨è)
- ServiceInstanceId: æœåŠ¡å®ä¾‹å”¯ä¸€æ ‡è¯† (æ¨è)
```

### ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡èµ„æºå±æ€§?

```text
1. æœåŠ¡è¯†åˆ«
   - åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å”¯ä¸€æ ‡è¯†æœåŠ¡
   - åŒºåˆ†ä¸åŒæœåŠ¡çš„é¥æµ‹æ•°æ®

2. ç‰ˆæœ¬ç®¡ç†
   - è·Ÿè¸ªä¸åŒç‰ˆæœ¬çš„è¡Œä¸º
   - æ”¯æŒé‡‘ä¸é›€å‘å¸ƒå’Œ A/B æµ‹è¯•

3. å®ä¾‹ç®¡ç†
   - è¯†åˆ«ç‰¹å®šæœåŠ¡å®ä¾‹
   - æ•…éšœå®šä½å’Œè´Ÿè½½åˆ†æ

4. ç»„ç»‡ç®¡ç†
   - é€šè¿‡å‘½åç©ºé—´ç»„ç»‡æœåŠ¡
   - æ”¯æŒå¤šç§Ÿæˆ·æ¶æ„
```

---

## æ ¸å¿ƒå±æ€§

### 1. å¿…éœ€å±æ€§

| å±æ€§å | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|------|
| `service.name` | string | æœåŠ¡çš„é€»è¾‘åç§° | `order-service` |

### 2. æ¨èå±æ€§

| å±æ€§å | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|-------|------|------|------|
| `service.namespace` | string | æœåŠ¡å‘½åç©ºé—´ | `production` |
| `service.version` | string | æœåŠ¡ç‰ˆæœ¬ | `1.2.3` |
| `service.instance.id` | string | æœåŠ¡å®ä¾‹ ID | `order-service-7b9f8c-xyz12` |

### 3. å®Œæ•´å±æ€§åˆ—è¡¨

| å±æ€§å | ç±»å‹ | å¿…éœ€æ€§ | æè¿° |
|-------|------|--------|------|
| `service.name` | string | **å¿…éœ€** | æœåŠ¡é€»è¾‘åç§° |
| `service.namespace` | string | æ¨è | æœåŠ¡å‘½åç©ºé—´ |
| `service.version` | string | æ¨è | æœåŠ¡ç‰ˆæœ¬ |
| `service.instance.id` | string | æ¨è | æœåŠ¡å®ä¾‹å”¯ä¸€æ ‡è¯†ç¬¦ |

---

## å±æ€§è¯¦è§£

### 1. service.name (å¿…éœ€)

**å®šä¹‰**: æœåŠ¡çš„é€»è¾‘åç§°,ç”¨äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å”¯ä¸€æ ‡è¯†æœåŠ¡ã€‚

**å‘½åè§„èŒƒ**:

```text
âœ… æ¨è:
  - ä½¿ç”¨ kebab-case: order-service, user-api
  - ä½¿ç”¨ snake_case: order_service, user_api
  - ç®€çŸ­ä¸”æè¿°æ€§: payment, auth, billing
  
âŒ é¿å…:
  - åŒ…å«ç¯å¢ƒä¿¡æ¯: order-service-prod
  - åŒ…å«ç‰ˆæœ¬ä¿¡æ¯: order-service-v2
  - åŒ…å«å®ä¾‹ä¿¡æ¯: order-service-instance-1
  - è¿‡é•¿çš„åç§°: order-management-microservice-api
```

**ç¤ºä¾‹**:

```go
// å¥½çš„å‘½å
service.name = "order-service"
service.name = "user-api"
service.name = "payment-gateway"

// ä¸å¥½çš„å‘½å
service.name = "order-service-production-v2-instance-1"  // å¤ªé•¿ä¸”åŒ…å«ç¯å¢ƒ/ç‰ˆæœ¬ä¿¡æ¯
service.name = "srv1"                                    // å¤ªçŸ­ä¸”ä¸æè¿°æ€§
```

### 2. service.namespace

**å®šä¹‰**: æœåŠ¡å‘½åç©ºé—´,ç”¨äºç»„ç»‡å’Œéš”ç¦»æœåŠ¡ã€‚

**ä½¿ç”¨åœºæ™¯**:

```text
1. ç¯å¢ƒéš”ç¦»:
   - production
   - staging
   - development

2. å›¢é˜Ÿéš”ç¦»:
   - team-alpha
   - team-beta
   - team-charlie

3. ç§Ÿæˆ·éš”ç¦»:
   - tenant-1
   - tenant-2
   - customer-xyz

4. åŒºåŸŸéš”ç¦»:
   - us-east
   - eu-west
   - asia-pacific
```

**å‘½åå»ºè®®**:

```text
ç¯å¢ƒå‘½åç©ºé—´:
  production, staging, development, test

å›¢é˜Ÿå‘½åç©ºé—´:
  team-<name>, org-<name>

ç§Ÿæˆ·å‘½åç©ºé—´:
  tenant-<id>, customer-<name>

æ··åˆå‘½åç©ºé—´ (ç”¨ç‚¹åˆ†éš”):
  production.us-east
  staging.team-alpha
  production.tenant-123
```

### 3. service.version

**å®šä¹‰**: æœåŠ¡çš„ç‰ˆæœ¬å·,éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒã€‚

**ç‰ˆæœ¬æ ¼å¼**:

```text
è¯­ä¹‰åŒ–ç‰ˆæœ¬ (Semantic Versioning):
  MAJOR.MINOR.PATCH
  
ç¤ºä¾‹:
  1.0.0 - åˆå§‹å‘å¸ƒ
  1.1.0 - æ–°åŠŸèƒ½
  1.1.1 - Bug ä¿®å¤
  2.0.0 - ç ´åæ€§å˜æ›´

Git SHA (é€‚ç”¨äºæŒç»­éƒ¨ç½²):
  abcd1234
  v1.2.3-g1234567

æ„å»ºç‰ˆæœ¬:
  1.2.3-build.123
  1.2.3+20240101120000
```

**ç¤ºä¾‹**:

```go
// è¯­ä¹‰åŒ–ç‰ˆæœ¬
service.version = "1.2.3"

// Git SHA
service.version = "abc1234"

// å¸¦å…ƒæ•°æ®çš„ç‰ˆæœ¬
service.version = "1.2.3-beta.1"
service.version = "1.2.3+20240101"
```

### 4. service.instance.id

**å®šä¹‰**: æœåŠ¡å®ä¾‹çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚

**ç”Ÿæˆç­–ç•¥**:

```text
1. Kubernetes Pod Name:
   order-service-7b9f8c-xyz12

2. å®¹å™¨ ID:
   container://abc123def456

3. ä¸»æœºå + PID:
   host-123.prod.example.com:12345

4. UUID:
   550e8400-e29b-41d4-a716-446655440000

5. è‡ªå®šä¹‰æ ¼å¼:
   <service>-<region>-<timestamp>-<random>
   order-service-us-east-1234567890-abc
```

**ç¤ºä¾‹**:

```go
// Kubernetes
service.instance.id = "order-service-7b9f8c-xyz12"

// å®¹å™¨
service.instance.id = "container://abc123def456"

// ä¸»æœºå + PID
hostname, _ := os.Hostname()
pid := os.Getpid()
service.instance.id = fmt.Sprintf("%s:%d", hostname, pid)

// UUID
service.instance.id = uuid.New().String()
```

---

## Go å®ç°

### 1. åŸºç¡€å®ç°

```go
package main

import (
    "context"
    "fmt"
    "log"
    "os"

    "go.opentelemetry.io/otel"
    "go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc"
    "go.opentelemetry.io/otel/sdk/resource"
    sdktrace "go.opentelemetry.io/otel/sdk/trace"
    semconv "go.opentelemetry.io/otel/semconv/v1.24.0"
)

func initTracer() (*sdktrace.TracerProvider, error) {
    ctx := context.Background()

    // 1. åˆ›å»º OTLP å¯¼å‡ºå™¨
    exporter, err := otlptracegrpc.New(ctx,
        otlptracegrpc.WithInsecure(),
        otlptracegrpc.WithEndpoint("localhost:4317"),
    )
    if err != nil {
        return nil, fmt.Errorf("failed to create exporter: %w", err)
    }

    // 2. åˆ›å»ºæœåŠ¡èµ„æº
    res, err := resource.New(ctx,
        resource.WithAttributes(
            // å¿…éœ€: æœåŠ¡åç§°
            semconv.ServiceName("order-service"),
            
            // æ¨è: æœåŠ¡å‘½åç©ºé—´
            semconv.ServiceNamespace("production"),
            
            // æ¨è: æœåŠ¡ç‰ˆæœ¬
            semconv.ServiceVersion("1.2.3"),
            
            // æ¨è: æœåŠ¡å®ä¾‹ ID
            semconv.ServiceInstanceID(getInstanceID()),
        ),
    )
    if err != nil {
        return nil, fmt.Errorf("failed to create resource: %w", err)
    }

    // 3. åˆ›å»º TracerProvider
    tp := sdktrace.NewTracerProvider(
        sdktrace.WithBatcher(exporter),
        sdktrace.WithResource(res),
    )

    otel.SetTracerProvider(tp)
    return tp, nil
}

// getInstanceID è·å–å®ä¾‹ ID
func getInstanceID() string {
    // ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ (Kubernetes Pod Name)
    if instanceID := os.Getenv("HOSTNAME"); instanceID != "" {
        return instanceID
    }

    // å¤‡ç”¨æ–¹æ¡ˆ: ä¸»æœºå + PID
    hostname, _ := os.Hostname()
    pid := os.Getpid()
    return fmt.Sprintf("%s:%d", hostname, pid)
}

func main() {
    // åˆå§‹åŒ– Tracer
    tp, err := initTracer()
    if err != nil {
        log.Fatalf("Failed to initialize tracer: %v", err)
    }
    defer func() {
        if err := tp.Shutdown(context.Background()); err != nil {
            log.Printf("Error shutting down tracer provider: %v", err)
        }
    }()

    // åˆ›å»º Tracer
    tracer := otel.Tracer("order-service")

    // åˆ›å»º Span
    ctx := context.Background()
    ctx, span := tracer.Start(ctx, "process-order")
    defer span.End()

    // ä¸šåŠ¡é€»è¾‘
    fmt.Println("Processing order...")
}
```

### 2. ä»ç¯å¢ƒå˜é‡é…ç½®

```go
package config

import (
    "os"

    "go.opentelemetry.io/otel/sdk/resource"
    semconv "go.opentelemetry.io/otel/semconv/v1.24.0"
)

// ServiceConfig æœåŠ¡é…ç½®
type ServiceConfig struct {
    Name        string
    Namespace   string
    Version     string
    InstanceID  string
}

// NewServiceConfigFromEnv ä»ç¯å¢ƒå˜é‡åˆ›å»ºæœåŠ¡é…ç½®
func NewServiceConfigFromEnv() *ServiceConfig {
    return &ServiceConfig{
        Name:       getEnv("SERVICE_NAME", "unknown-service"),
        Namespace:  getEnv("SERVICE_NAMESPACE", ""),
        Version:    getEnv("SERVICE_VERSION", "unknown"),
        InstanceID: getEnv("SERVICE_INSTANCE_ID", getDefaultInstanceID()),
    }
}

// ToResource è½¬æ¢ä¸º Resource
func (c *ServiceConfig) ToResource(ctx context.Context) (*resource.Resource, error) {
    attrs := []attribute.KeyValue{
        semconv.ServiceName(c.Name),
    }

    if c.Namespace != "" {
        attrs = append(attrs, semconv.ServiceNamespace(c.Namespace))
    }

    if c.Version != "" {
        attrs = append(attrs, semconv.ServiceVersion(c.Version))
    }

    if c.InstanceID != "" {
        attrs = append(attrs, semconv.ServiceInstanceID(c.InstanceID))
    }

    return resource.New(ctx, resource.WithAttributes(attrs...))
}

// getEnv è·å–ç¯å¢ƒå˜é‡,å¸¦é»˜è®¤å€¼
func getEnv(key, defaultValue string) string {
    if value := os.Getenv(key); value != "" {
        return value
    }
    return defaultValue
}

// getDefaultInstanceID è·å–é»˜è®¤å®ä¾‹ ID
func getDefaultInstanceID() string {
    // Kubernetes Pod Name
    if hostname := os.Getenv("HOSTNAME"); hostname != "" {
        return hostname
    }

    // å®¹å™¨ ID
    if containerID := os.Getenv("CONTAINER_ID"); containerID != "" {
        return containerID
    }

    // ä¸»æœºå + PID
    hostname, _ := os.Hostname()
    pid := os.Getpid()
    return fmt.Sprintf("%s:%d", hostname, pid)
}
```

### 3. Kubernetes é›†æˆ

```go
package k8s

import (
    "context"
    "fmt"
    "os"

    "go.opentelemetry.io/otel/sdk/resource"
    semconv "go.opentelemetry.io/otel/semconv/v1.24.0"
)

// NewK8sResource åˆ›å»º Kubernetes æœåŠ¡èµ„æº
func NewK8sResource(ctx context.Context, serviceName string) (*resource.Resource, error) {
    return resource.New(ctx,
        // æœåŠ¡å±æ€§
        resource.WithAttributes(
            semconv.ServiceName(serviceName),
            semconv.ServiceNamespace(os.Getenv("K8S_NAMESPACE")),
            semconv.ServiceVersion(os.Getenv("APP_VERSION")),
            semconv.ServiceInstanceID(os.Getenv("HOSTNAME")), // Pod Name
        ),
        
        // Kubernetes æ£€æµ‹å™¨ (è‡ªåŠ¨æ£€æµ‹ K8s ç¯å¢ƒ)
        resource.WithFromEnv(),
        resource.WithProcess(),
        resource.WithOS(),
        resource.WithContainer(),
        resource.WithHost(),
    )
}

// Kubernetes Deployment ç¤ºä¾‹
/*
apiVersion: apps/v1
kind: Deployment
metadata:
  name: order-service
spec:
  template:
    spec:
      containers:
      - name: order-service
        image: order-service:1.2.3
        env:
        # æœåŠ¡å±æ€§
        - name: SERVICE_NAME
          value: "order-service"
        - name: SERVICE_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: APP_VERSION
          value: "1.2.3"
        - name: K8S_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        # Pod ä¿¡æ¯ (HOSTNAME è‡ªåŠ¨è®¾ç½®ä¸º Pod Name)
*/
```

---

## æœ€ä½³å®è·µ

### 1. æœåŠ¡å‘½åè§„èŒƒ

```text
âœ… å¥½çš„å®è·µ:

1. ä½¿ç”¨ä¸€è‡´çš„å‘½åé£æ ¼
   order-service, user-service, payment-service

2. åæ˜ æœåŠ¡èŒè´£
   auth (è®¤è¯), billing (è®¡è´¹), notification (é€šçŸ¥)

3. ç®€çŸ­ä¸”æè¿°æ€§
   api, gateway, worker

4. é¿å…æŠ€æœ¯ç»†èŠ‚
   âœ“ order-service
   âœ— order-service-java-springboot

âŒ é¿å…çš„å®è·µ:

1. åŒ…å«ç¯å¢ƒä¿¡æ¯
   âœ— order-service-prod

2. åŒ…å«ç‰ˆæœ¬ä¿¡æ¯
   âœ— order-service-v2

3. åŒ…å«å®ä¾‹ä¿¡æ¯
   âœ— order-service-1

4. ä½¿ç”¨ä¸ä¸€è‡´çš„é£æ ¼
   âœ— orderService, order_api, OrderSvc
```

### 2. ç‰ˆæœ¬ç®¡ç†

```go
package version

import (
    "fmt"
    "runtime/debug"
)

// é€šè¿‡ ldflags æ³¨å…¥ç‰ˆæœ¬ä¿¡æ¯
var (
    Version   = "dev"
    GitCommit = "unknown"
    BuildTime = "unknown"
)

// GetVersion è·å–ç‰ˆæœ¬å­—ç¬¦ä¸²
func GetVersion() string {
    if Version != "dev" {
        return Version
    }

    // å°è¯•ä» build info è·å–
    if info, ok := debug.ReadBuildInfo(); ok {
        return info.Main.Version
    }

    return "unknown"
}

// GetFullVersion è·å–å®Œæ•´ç‰ˆæœ¬ä¿¡æ¯
func GetFullVersion() string {
    return fmt.Sprintf("%s (commit: %s, built: %s)", 
        GetVersion(), GitCommit, BuildTime)
}

// æ„å»ºæ—¶æ³¨å…¥ç‰ˆæœ¬:
// go build -ldflags "-X main.Version=1.2.3 -X main.GitCommit=$(git rev-parse --short HEAD) -X main.BuildTime=$(date -u +%Y%m%d%H%M%S)"
```

### 3. å®ä¾‹ ID ç”Ÿæˆ

```go
package instance

import (
    "crypto/rand"
    "encoding/hex"
    "fmt"
    "os"
)

// GenerateInstanceID ç”Ÿæˆå®ä¾‹ ID
func GenerateInstanceID(serviceName string) string {
    // ä¼˜å…ˆçº§1: Kubernetes Pod Name
    if podName := os.Getenv("HOSTNAME"); podName != "" {
        return podName
    }

    // ä¼˜å…ˆçº§2: å®¹å™¨ ID
    if containerID := os.Getenv("CONTAINER_ID"); containerID != "" {
        return fmt.Sprintf("container-%s", containerID[:12])
    }

    // ä¼˜å…ˆçº§3: ä¸»æœºå + PID
    hostname, _ := os.Hostname()
    pid := os.Getpid()
    
    // æ·»åŠ éšæœºåç¼€ç¡®ä¿å”¯ä¸€æ€§
    randomBytes := make([]byte, 4)
    rand.Read(randomBytes)
    randomSuffix := hex.EncodeToString(randomBytes)

    return fmt.Sprintf("%s-%s-%d-%s", 
        serviceName, hostname, pid, randomSuffix)
}
```

---

## å¸¸è§é—®é¢˜

### Q1: service.name å’Œåº”ç”¨ç¨‹åºåç§°çš„åŒºåˆ«?

**A**: `service.name` æ˜¯é€»è¾‘æœåŠ¡åç§°,è€Œåº”ç”¨ç¨‹åºåç§°å¯èƒ½åŒ…å«ç¯å¢ƒæˆ–æŠ€æœ¯ç»†èŠ‚ã€‚

```text
åº”ç”¨ç¨‹åºåç§°: order-service-prod-v2-java
Service Name:  order-service

åŸå› :
- service.name ç”¨äºè¯†åˆ«æœåŠ¡çš„é€»è¾‘è§’è‰²
- ç¯å¢ƒã€ç‰ˆæœ¬ã€æŠ€æœ¯æ ˆåº”è¯¥ç”¨å…¶ä»–å±æ€§è¡¨ç¤º
- ä¿æŒ service.name ç¨³å®š,ä¾¿äºé•¿æœŸè¿½è¸ª
```

### Q2: æ˜¯å¦å¿…é¡»è®¾ç½® service.namespace?

**A**: ä¸æ˜¯å¿…éœ€çš„,ä½†åœ¨ä»¥ä¸‹åœºæ™¯å¼ºçƒˆæ¨è:

```text
æ¨èè®¾ç½®çš„åœºæ™¯:
âœ“ å¤šç¯å¢ƒéƒ¨ç½² (dev/staging/prod)
âœ“ å¤šç§Ÿæˆ·ç³»ç»Ÿ
âœ“ å¤šå›¢é˜Ÿåä½œ
âœ“ å¤šåŒºåŸŸéƒ¨ç½²

å¯ä»¥ä¸è®¾ç½®çš„åœºæ™¯:
- å•ä¸€ç¯å¢ƒ
- æœåŠ¡æ•°é‡å°‘
- ç®€å•æ¶æ„
```

### Q3: service.instance.id åº”è¯¥å¦‚ä½•ä¿æŒç¨³å®š?

**A**: å–å†³äºéƒ¨ç½²æ¨¡å¼:

```text
Kubernetes:
- ä½¿ç”¨ Pod Name (è‡ªåŠ¨ç¨³å®š)
- Pod é‡å¯ä¼šæ”¹å˜ ID (ç¬¦åˆé¢„æœŸ)

è™šæ‹Ÿæœº/è£¸æœº:
- ä½¿ç”¨ä¸»æœºå + é…ç½®æ–‡ä»¶
- æ‰‹åŠ¨ç®¡ç†å®ä¾‹ ID
- é‡å¯åä¿æŒä¸å˜

å®¹å™¨:
- ä½¿ç”¨å®¹å™¨ ID
- å®¹å™¨é‡å»ºä¼šæ”¹å˜ ID
```

### Q4: å¦‚ä½•å¤„ç†æœåŠ¡åç§°å˜æ›´?

**A**:

```text
ä¸æ¨èå˜æ›´æœåŠ¡åç§°,å› ä¸ºä¼šå½±å“:
- å†å²æ•°æ®æŸ¥è¯¢
- ç›‘æ§å‘Šè­¦è§„åˆ™
- æœåŠ¡ä¾èµ–å…³ç³»

å¦‚æœå¿…é¡»å˜æ›´:
1. åˆ›å»ºåˆ«åæ˜ å°„
2. é€æ­¥è¿ç§»
3. ä¿ç•™å†å²æ•°æ®è®¿é—®
4. æ›´æ–°æ‰€æœ‰ç›¸å…³é…ç½®
```

---

## å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [OpenTelemetry Semantic Conventions - Service](https://opentelemetry.io/docs/specs/semconv/resource/service/)
- [Resource Semantic Conventions](https://opentelemetry.io/docs/specs/semconv/resource/)

### ç›¸å…³è§„èŒƒ

- [Semantic Versioning](https://semver.org/)
- [Kubernetes Downward API](https://kubernetes.io/docs/tasks/inject-data-application/downward-api-volume-expose-pod-information/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ9æ—¥  
**ç»´æŠ¤è€…**: OTLP æ ‡å‡†åŒ–é¡¹ç›®ç»„
