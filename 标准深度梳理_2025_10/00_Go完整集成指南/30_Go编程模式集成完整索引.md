# Go ç¼–ç¨‹æ¨¡å¼ä¸ OTLP é›†æˆå®Œæ•´ç´¢å¼•

## ğŸ“‹ ç›®å½•

- [æ–‡æ¡£æ¦‚è¿°](#æ–‡æ¡£æ¦‚è¿°)
- [æ ¸å¿ƒé›†æˆæŒ‡å—](#æ ¸å¿ƒé›†æˆæŒ‡å—)
- [é«˜çº§ç¼–ç¨‹æ¨¡å¼](#é«˜çº§ç¼–ç¨‹æ¨¡å¼)
  - [å¹¶å‘æ¨¡å¼](#å¹¶å‘æ¨¡å¼)
  - [å‡½æ•°å¼ç¼–ç¨‹](#å‡½æ•°å¼ç¼–ç¨‹)
  - [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
  - [å†…å­˜ç®¡ç†](#å†…å­˜ç®¡ç†)
  - [ç”Ÿäº§éƒ¨ç½²](#ç”Ÿäº§éƒ¨ç½²)
- [æ¡†æ¶é›†æˆ](#æ¡†æ¶é›†æˆ)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å­¦ä¹ è·¯å¾„](#å­¦ä¹ è·¯å¾„)
- [å¿«é€Ÿå‚è€ƒ](#å¿«é€Ÿå‚è€ƒ)

---

## æ–‡æ¡£æ¦‚è¿°

æœ¬ç´¢å¼•æ±‡æ€»äº†æ‰€æœ‰ Go ç¼–ç¨‹æ¨¡å¼ä¸ OpenTelemetry OTLP é›†æˆçš„æ–‡æ¡£ï¼Œæ¶µç›–ä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´å†…å®¹ã€‚

### æ ¸å¿ƒä»·å€¼

âœ… **å®Œæ•´çš„æ¨¡å¼è¦†ç›–** - ä»å¹¶å‘åˆ°å‡½æ•°å¼ï¼Œä»é”™è¯¯å¤„ç†åˆ°å†…å­˜ç®¡ç†  
âœ… **ç”Ÿäº§çº§å®è·µ** - æ‰€æœ‰æ¨¡å¼éƒ½åŒ…å« OTLP é›†æˆå’Œç›‘æ§  
âœ… **ç±»å‹å®‰å…¨** - å……åˆ†åˆ©ç”¨ Go 1.25.1 æ³›å‹ç‰¹æ€§  
âœ… **æ€§èƒ½ä¼˜åŒ–** - é›¶åˆ†é…æŠ€æœ¯ã€å¯¹è±¡æ± ã€GC è°ƒä¼˜  
âœ… **æœ€ä½³å®è·µ** - æ¶µç›–å¸¸è§åæ¨¡å¼å’Œè§£å†³æ–¹æ¡ˆ

---

## æ ¸å¿ƒé›†æˆæŒ‡å—

### åŸºç¡€é›†æˆ

| æ–‡æ¡£ | æè¿° | æ ¸å¿ƒå†…å®¹ |
|------|------|----------|
| [00_Goç¼–ç¨‹æ¨¡å¼é›†æˆæ€»ç»“](./00_Goç¼–ç¨‹æ¨¡å¼é›†æˆæ€»ç»“_2025_10_09.md) | æ€»ä½“æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹ | ä¾èµ–ç‰ˆæœ¬ã€å¿«é€Ÿå¼€å§‹ã€å­¦ä¹ è·¯å¾„ |
| [01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—](./01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—.md) | Go 1.25.1 + OTLP é›†æˆ | åˆå§‹åŒ–ã€Traceã€Metricã€Context |
| [03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](./03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ.md) | æ€§èƒ½ä¼˜åŒ–æŒ‡å— | å†…å­˜ä¼˜åŒ–ã€GC è°ƒä¼˜ã€é‡‡æ ·ç­–ç•¥ |

### æ–°ç‰¹æ€§é›†æˆ

| æ–‡æ¡£ | æè¿° | Go 1.25.1 ç‰¹æ€§ |
|------|------|----------------|
| [02_Go_1.25.1_æ–°ç‰¹æ€§æ·±åº¦åº”ç”¨](./02_Go_1.25.1_æ–°ç‰¹æ€§æ·±åº¦åº”ç”¨.md) | æ–°ç‰¹æ€§åº”ç”¨ | Genericsã€Context å¢å¼ºã€PGO |
| [04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ](./04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ.md) | HTTP/2 & HTTP/3 | QUICã€Server Pushã€æµæ§åˆ¶ |

---

## é«˜çº§ç¼–ç¨‹æ¨¡å¼

### å¹¶å‘æ¨¡å¼

#### [31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ](./31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ.md)

**æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **TracedChannel** - å¸¦è¿½è¸ªçš„ Channel

   ```go
   tc, _ := NewTracedChannel[int]("orders", 100)
   tc.Send(ctx, order)
   order, _ := tc.Receive(ctx)
   ```

2. **SelectMultiplexer** - Select å¤šè·¯å¤ç”¨

   ```go
   mux := NewSelectMultiplexer[int](ctx, "processor")
   mux.AddCase("orders", ordersCh)
   mux.AddCase("events", eventsCh)
   ```

3. **WorkerPool** - å·¥ä½œæ± 

   ```go
   pool := NewWorkerPool[Job, Result](ctx, 10, processJob)
   future := pool.Submit(ctx, job)
   result, _ := future.Get(ctx)
   ```

4. **Pipeline** - æ•°æ®æµæ°´çº¿

   ```go
   pipeline := NewPipeline[int, string](ctx, "data-pipeline")
   pipeline.AddStage("validate", validateStage)
   pipeline.AddStage("transform", transformStage)
   result := pipeline.Execute(ctx, input)
   ```

5. **Fan-Out/Fan-In** - æ‰‡å‡ºæ‰‡å…¥

   ```go
   fanOut := NewFanOut[int](ctx, "distributor", 3)
   results := fanOut.Distribute(ctx, inputs)
   merged := FanIn(ctx, results)
   ```

6. **RateLimiter** - é€Ÿç‡é™åˆ¶

   ```go
   limiter := NewRateLimiter(100, 10) // 100 req/sec, burst 10
   limiter.Wait(ctx)
   ```

**å…³é”®ç‰¹æ€§ï¼š**

- å®Œæ•´çš„ Trace å’Œ Metric é›†æˆ
- Context ä¼ æ’­å’Œå–æ¶ˆ
- Goroutine æ³„æ¼é˜²æŠ¤
- æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

---

### å‡½æ•°å¼ç¼–ç¨‹

#### [32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ](./32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ.md)

**æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **é›†åˆæ“ä½œ**

   ```go
   // Map
   result := Map(ctx, numbers, func(ctx context.Context, n int) (int, error) {
       return n * 2, nil
   })
   
   // Filter
   filtered := Filter(ctx, numbers, func(ctx context.Context, n int) (bool, error) {
       return n > 0, nil
   })
   
   // Reduce
   sum := Reduce(ctx, numbers, 0, func(ctx context.Context, acc, n int) (int, error) {
       return acc + n, nil
   })
   ```

2. **é«˜é˜¶å‡½æ•°**

   ```go
   // WithTracing - è¿½è¸ªä¸­é—´ä»¶
   traced := WithTracing[Request, Response]("process")(processFunc)
   
   // WithRetry - é‡è¯•ä¸­é—´ä»¶
   resilient := WithRetry[Request, Response](3, time.Second)(processFunc)
   
   // Chain - é“¾å¼ç»„åˆ
   handler := Chain(
       WithTracing[Request, Response]("handler"),
       WithRetry[Request, Response](3, time.Second),
       WithTimeout[Request, Response](5*time.Second),
   )(processFunc)
   ```

3. **å‡½æ•°ç»„åˆ**

   ```go
   // Compose - ä»å³åˆ°å·¦
   composed := Compose(
       func(x int) int { return x * 2 },
       func(x int) int { return x + 1 },
   )
   
   // Pipe - ä»å·¦åˆ°å³
   piped := Pipe(
       func(x int) int { return x + 1 },
       func(x int) int { return x * 2 },
   )
   ```

4. **Monad æ¨¡å¼**

   ```go
   // Result Monad
   result := Ok[int](42)
   mapped := result.Map(func(x int) int { return x * 2 })
   
   // Option Monad
   opt := Some[int](42)
   value := opt.OrElse(0)
   ```

**å…³é”®ç‰¹æ€§ï¼š**

- ç±»å‹å®‰å…¨çš„æ³›å‹å®ç°
- å®Œæ•´çš„ OTLP é›†æˆ
- å‡½æ•°å¼é”™è¯¯å¤„ç†
- ä¸å¯å˜æ•°æ®ç»“æ„

---

### é”™è¯¯å¤„ç†

#### [33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­](./33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­.md)

**æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **è‡ªå®šä¹‰é”™è¯¯ç±»å‹**

   ```go
   type TracedError struct {
       Category    ErrorCategory
       Operation   string
       Message     string
       Cause       error
       TraceID     string
       SpanID      string
       Timestamp   time.Time
       Attributes  map[string]interface{}
       Retryable   bool
   }
   ```

2. **é”™è¯¯åŒ…è£…ä¸è¿½è¸ª**

   ```go
   // WrapError - åŒ…è£…é”™è¯¯
   err := WrapError(ctx, CategoryDatabase, "query", 
       "failed to fetch user", originalErr)
   
   // WrapWithSpan - åœ¨ Span ä¸­åŒ…è£…
   err := WrapWithSpan(ctx, span, CategoryDatabase, 
       "query", "failed to fetch user", originalErr)
   ```

3. **å¤šé”™è¯¯èšåˆ**

   ```go
   // MultiError
   multiErr := NewMultiError()
   multiErr.Add(err1)
   multiErr.Add(err2)
   
   // errors.Join (Go 1.20+)
   err := errors.Join(err1, err2, err3)
   ```

4. **Context å–æ¶ˆç®¡ç†**

   ```go
   // WithCancellationReason - å¸¦å–æ¶ˆåŸå› 
   ctx, cancel := WithCancellationReason(parentCtx, "timeout exceeded")
   
   // WithDeadlineAndCause - å¸¦æˆªæ­¢æ—¶é—´å’ŒåŸå› 
   ctx, cancel := WithDeadlineAndCause(parentCtx, deadline, "processing timeout")
   
   // WithoutCancellation - ä¸ç»§æ‰¿å–æ¶ˆ
   ctx := WithoutCancellation(parentCtx)
   
   // MonitorCancellation - ç›‘æ§å–æ¶ˆ
   MonitorCancellation(ctx, func(reason string) {
       log.Printf("cancelled: %s", reason)
   })
   ```

5. **è¶…æ—¶ç®¡ç†**

   ```go
   // WithTimeout
   result, err := WithTimeout(ctx, 5*time.Second, func(ctx context.Context) (Result, error) {
       return processRequest(ctx)
   })
   
   // CascadingTimeout - çº§è”è¶…æ—¶
   timeouts := CascadingTimeouts(30*time.Second, []float64{0.3, 0.3, 0.4})
   ```

6. **æ¢å¤ç­–ç•¥**

   ```go
   // ExponentialBackoff
   strategy := ExponentialBackoff{
       InitialDelay: time.Second,
       MaxDelay:     30 * time.Second,
       MaxRetries:   5,
       Factor:       2.0,
   }
   
   result, err := ExecuteWithRecovery(ctx, strategy, operation)
   ```

**å…³é”®ç‰¹æ€§ï¼š**

- é”™è¯¯åˆ†ç±»å’Œè¿½è¸ª
- Context ä¼ æ’­å’Œå–æ¶ˆ
- å¤šé”™è¯¯å¤„ç†
- é‡è¯•å’Œæ¢å¤ç­–ç•¥

---

### å†…å­˜ç®¡ç†

#### [34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜](./34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜.md)

**æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **å†…å­˜åˆ†é…ä¼˜åŒ–**

   ```go
   // é¢„åˆ†é…åˆ‡ç‰‡
   items := make([]Item, 0, expectedSize)
   
   // é¢„åˆ†é… Map
   cache := make(map[string]Value, expectedSize)
   
   // é‡ç”¨ Buffer
   var buf bytes.Buffer
   buf.Reset()
   
   // strings.Builder ä¼˜åŒ–
   var builder strings.Builder
   builder.Grow(estimatedSize)
   builder.WriteString("data")
   ```

2. **å¯¹è±¡æ± **

   ```go
   // åˆ›å»ºå¯¹è±¡æ± 
   pool, _ := NewObjectPool(
       func() *Buffer { return &Buffer{} },
       func(b *Buffer) { b.Reset() },
   )
   
   // ä½¿ç”¨å¯¹è±¡æ± 
   buf := pool.Get(ctx)
   defer pool.Put(ctx, buf)
   
   // ç»Ÿè®¡ä¿¡æ¯
   stats := pool.Stats()
   fmt.Printf("Reuse rate: %.2f%%\n", stats.ReuseRate)
   ```

3. **GC è°ƒä¼˜**

   ```go
   // ç›‘æ§ GC
   monitor := NewGCMonitor()
   monitor.Start(ctx)
   
   stats := monitor.Stats()
   fmt.Printf("GC pause: %v\n", stats.AvgPause)
   
   // è°ƒæ•´ GC å‚æ•°
   debug.SetGCPercent(200)  // é™ä½ GC é¢‘ç‡
   debug.SetMemoryLimit(8 * 1024 * 1024 * 1024)  // 8GB é™åˆ¶
   ```

4. **é›¶åˆ†é…æŠ€æœ¯**

   ```go
   // unsafe string/bytes è½¬æ¢
   str := BytesToString(bytes)
   bytes := StringToBytes(str)
   
   // å¿«é€Ÿæ•´æ•°è½¬å­—ç¬¦ä¸²
   str := FastInt64ToString(42)
   
   // é‡ç”¨åˆ‡ç‰‡
   slice = ReuseSlice(slice[:0], newData)
   ```

**å…³é”®ç‰¹æ€§ï¼š**

- å†…å­˜åˆ†é…ä¼˜åŒ–
- å¯¹è±¡æ± æ¨¡å¼
- GC ç›‘æ§å’Œè°ƒä¼˜
- é›¶åˆ†é…æŠ€æœ¯

---

### ç”Ÿäº§éƒ¨ç½²

#### [35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼](./35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼.md)

**æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **ç”Ÿäº§çº§åº”ç”¨åˆå§‹åŒ–**

   ```go
   func InitProduction(ctx context.Context, config Config) (*Application, error) {
       // 1. æ—¥å¿—
       logger := initLogger(config.LogLevel)
       
       // 2. OTLP Tracing
       tp, err := initTracing(ctx, config.OTLPEndpoint)
       
       // 3. OTLP Metrics
       mp, err := initMetrics(ctx, config.OTLPEndpoint)
       
       // 4. Propagators
       otel.SetTextMapPropagator(propagation.TraceContext{})
       
       return &Application{
           Logger:         logger,
           TracerProvider: tp,
           MeterProvider:  mp,
       }, nil
   }
   ```

2. **ä¼˜é›…å…³é—­**

   ```go
   // åˆ›å»ºç®¡ç†å™¨
   gs := NewGracefulShutdown(30 * time.Second)
   
   // æ³¨å†Œå¤„ç†å™¨
   gs.Register(ShutdownHandler{
       Name:    "http-server",
       Order:   1,
       Handler: func(ctx context.Context) error {
           return httpServer.Shutdown(ctx)
       },
   })
   
   gs.Register(ShutdownHandler{
       Name:    "tracer-provider",
       Order:   2,
       Handler: func(ctx context.Context) error {
           return tp.Shutdown(ctx)
       },
   })
   
   // ç­‰å¾…å…³é—­ä¿¡å·
   if err := gs.WaitForShutdown(ctx); err != nil {
       log.Fatal(err)
   }
   ```

3. **å¥åº·æ£€æŸ¥**

   ```go
   checker := NewHealthChecker()
   
   // æ³¨å†Œæ£€æŸ¥
   checker.RegisterCheck(LivenessCheck{
       Name: "app",
       Check: func(ctx context.Context) error {
           return nil
       },
   })
   
   checker.RegisterCheck(ReadinessCheck{
       Name: "database",
       Check: func(ctx context.Context) error {
           return db.PingContext(ctx)
       },
   })
   
   // HTTP ç«¯ç‚¹
   http.HandleFunc("/health/live", checker.LivenessHandler)
   http.HandleFunc("/health/ready", checker.ReadinessHandler)
   ```

4. **å¸¸è§åæ¨¡å¼**
   - âŒ ä¸å¤„ç†å…³é—­ä¿¡å·
   - âŒ é˜»å¡å¼ Exporter
   - âŒ è¿‡åº¦é‡‡æ ·
   - âŒ å¿½ç•¥ Context
   - âŒ Goroutine æ³„æ¼

5. **éƒ¨ç½²æœ€ä½³å®è·µ**

   ```yaml
   # Kubernetes Deployment
   apiVersion: apps/v1
   kind: Deployment
   spec:
     template:
       spec:
         containers:
         - name: app
           livenessProbe:
             httpGet:
               path: /health/live
               port: 8080
             initialDelaySeconds: 10
             periodSeconds: 10
           
           readinessProbe:
             httpGet:
               path: /health/ready
               port: 8080
             initialDelaySeconds: 5
             periodSeconds: 5
           
           resources:
             requests:
               memory: "256Mi"
               cpu: "500m"
             limits:
               memory: "512Mi"
               cpu: "1000m"
   ```

**å…³é”®ç‰¹æ€§ï¼š**

- å®Œæ•´çš„åº”ç”¨åˆå§‹åŒ–
- ä¼˜é›…å…³é—­æœºåˆ¶
- å¥åº·æ£€æŸ¥
- åæ¨¡å¼è¯†åˆ«
- Kubernetes é›†æˆ

---

## æ¡†æ¶é›†æˆ

### [09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—](./09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—.md)

**æ”¯æŒçš„æ¡†æ¶ï¼š**

1. **Gin** - æœ€æµè¡Œçš„ Web æ¡†æ¶

   ```go
   router := gin.Default()
   router.Use(otelgin.Middleware("my-service"))
   ```

2. **Echo** - é«˜æ€§èƒ½ Web æ¡†æ¶

   ```go
   e := echo.New()
   e.Use(otelecho.Middleware("my-service"))
   ```

3. **Fiber** - Express é£æ ¼çš„ Web æ¡†æ¶

   ```go
   app := fiber.New()
   app.Use(otelfiber.Middleware())
   ```

4. **Chi** - è½»é‡çº§è·¯ç”±å™¨

   ```go
   r := chi.NewRouter()
   r.Use(otelmiddleware.Tracer("my-service"))
   ```

**é›†æˆå†…å®¹ï¼š**

- ä¸­é—´ä»¶é…ç½®
- é”™è¯¯å¤„ç†
- Context ä¼ æ’­
- è·¯ç”±è¿½è¸ª
- Metric æ”¶é›†

---

## æ€§èƒ½ä¼˜åŒ–

### [03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](./03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ.md)

**ä¼˜åŒ–ç»´åº¦ï¼š**

1. **å†…å­˜ä¼˜åŒ–**
   - å‡å°‘åˆ†é…æ¬¡æ•°
   - å¯¹è±¡æ± å¤ç”¨
   - é¿å…é€ƒé€¸åˆ†æ

2. **GC ä¼˜åŒ–**
   - è°ƒæ•´ GOGC
   - è®¾ç½®å†…å­˜é™åˆ¶
   - ç›‘æ§ GC æŒ‡æ ‡

3. **é‡‡æ ·ç­–ç•¥**
   - TraceIDRatioBased
   - ParentBased
   - AdaptiveSampler
   - PrioritySampler

4. **æ‰¹å¤„ç†ä¼˜åŒ–**
   - BatchSpanProcessor
   - é˜Ÿåˆ—å¤§å°è°ƒä¼˜
   - å¯¼å‡ºè¶…æ—¶é…ç½®

**æ€§èƒ½æŒ‡æ ‡ï¼š**

- å†…å­˜ä½¿ç”¨
- GC æš‚åœæ—¶é—´
- ååé‡
- å»¶è¿Ÿåˆ†å¸ƒ

---

## å­¦ä¹ è·¯å¾„

### ğŸ¯ åˆå­¦è€…è·¯å¾„

1. **ç¬¬ä¸€å‘¨ï¼šåŸºç¡€é›†æˆ**
   - é˜…è¯» [01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—](./01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—.md)
   - è¿è¡ŒåŸºç¡€ç¤ºä¾‹
   - ç†è§£ Trace å’Œ Metric æ¦‚å¿µ

2. **ç¬¬äºŒå‘¨ï¼šæ¡†æ¶é›†æˆ**
   - é˜…è¯» [09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—](./09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—.md)
   - é€‰æ‹©ä¸€ä¸ªæ¡†æ¶æ·±å…¥å®è·µ
   - å®ç°å®Œæ•´çš„ Web æœåŠ¡

3. **ç¬¬ä¸‰å‘¨ï¼šæ€§èƒ½ä¼˜åŒ–**
   - é˜…è¯» [03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](./03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ.md)
   - å­¦ä¹ é‡‡æ ·ç­–ç•¥
   - è¿›è¡Œæ€§èƒ½æµ‹è¯•

### ğŸš€ ä¸­çº§å¼€å‘è€…è·¯å¾„

1. **ç¬¬å››å‘¨ï¼šé«˜çº§å¹¶å‘**
   - é˜…è¯» [31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ](./31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ.md)
   - å®ç° WorkerPool
   - å®ç° Pipeline

2. **ç¬¬äº”å‘¨ï¼šå‡½æ•°å¼ç¼–ç¨‹**
   - é˜…è¯» [32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ](./32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ.md)
   - å®ç° Middleware Chain
   - å®ç° Monad æ¨¡å¼

3. **ç¬¬å…­å‘¨ï¼šé”™è¯¯å¤„ç†**
   - é˜…è¯» [33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­](./33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­.md)
   - å®ç° TracedError
   - å®ç°æ¢å¤ç­–ç•¥

### ğŸ’ é«˜çº§å¼€å‘è€…è·¯å¾„

1. **ç¬¬ä¸ƒå‘¨ï¼šå†…å­˜ç®¡ç†**
   - é˜…è¯» [34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜](./34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜.md)
   - å®ç°å¯¹è±¡æ± 
   - è¿›è¡Œ GC è°ƒä¼˜

2. **ç¬¬å…«å‘¨ï¼šç”Ÿäº§éƒ¨ç½²**
   - é˜…è¯» [35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼](./35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼.md)
   - å®ç°ä¼˜é›…å…³é—­
   - é…ç½® Kubernetes éƒ¨ç½²

3. **ç¬¬ä¹å‘¨ï¼šHTTP/2 & HTTP/3**
   - é˜…è¯» [04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ](./04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ.md)
   - å®ç° HTTP/2 æœåŠ¡
   - å®éªŒ HTTP/3

---

## å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨ä»£ç ç‰‡æ®µ

#### 1. åˆå§‹åŒ– OTLP

```go
import (
    "go.opentelemetry.io/otel"
    "go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc"
    "go.opentelemetry.io/otel/sdk/trace"
)

func initTracing(ctx context.Context, endpoint string) (*trace.TracerProvider, error) {
    exporter, err := otlptracegrpc.New(ctx,
        otlptracegrpc.WithEndpoint(endpoint),
        otlptracegrpc.WithInsecure(),
    )
    if err != nil {
        return nil, err
    }
    
    tp := trace.NewTracerProvider(
        trace.WithBatcher(exporter),
        trace.WithResource(resource.NewWithAttributes(
            semconv.SchemaURL,
            semconv.ServiceName("my-service"),
        )),
    )
    
    otel.SetTracerProvider(tp)
    return tp, nil
}
```

#### 2. åˆ›å»º Span

```go
func processRequest(ctx context.Context, req Request) (Response, error) {
    tracer := otel.Tracer("my-service")
    ctx, span := tracer.Start(ctx, "process-request")
    defer span.End()
    
    span.SetAttributes(
        attribute.String("request.id", req.ID),
        attribute.Int("request.size", len(req.Data)),
    )
    
    // ä¸šåŠ¡é€»è¾‘
    result, err := doWork(ctx, req)
    if err != nil {
        span.RecordError(err)
        span.SetStatus(codes.Error, err.Error())
        return Response{}, err
    }
    
    span.SetStatus(codes.Ok, "")
    return result, nil
}
```

#### 3. è®°å½• Metric

```go
func recordMetric(ctx context.Context, value int64) error {
    meter := otel.Meter("my-service")
    
    counter, err := meter.Int64Counter(
        "requests.total",
        metric.WithDescription("Total requests"),
    )
    if err != nil {
        return err
    }
    
    counter.Add(ctx, value,
        metric.WithAttributes(
            attribute.String("service", "api"),
            attribute.String("method", "GET"),
        ),
    )
    
    return nil
}
```

#### 4. Context ä¼ æ’­

```go
// HTTP Client
func makeRequest(ctx context.Context, url string) (*http.Response, error) {
    req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
    if err != nil {
        return nil, err
    }
    
    // æ³¨å…¥ Trace Context
    otel.GetTextMapPropagator().Inject(ctx, propagation.HeaderCarrier(req.Header))
    
    client := &http.Client{
        Transport: otelhttp.NewTransport(http.DefaultTransport),
    }
    
    return client.Do(req)
}

// HTTP Server
func handler(w http.ResponseWriter, r *http.Request) {
    // æå– Trace Context
    ctx := otel.GetTextMapPropagator().Extract(r.Context(), 
        propagation.HeaderCarrier(r.Header))
    
    tracer := otel.Tracer("my-service")
    ctx, span := tracer.Start(ctx, "handle-request")
    defer span.End()
    
    // å¤„ç†è¯·æ±‚
    processRequest(ctx, r)
}
```

### å¸¸ç”¨å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
go get go.opentelemetry.io/otel@latest
go get go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc@latest
go get go.opentelemetry.io/otel/sdk@latest

# è¿è¡Œç¤ºä¾‹
go run examples/basic/main.go

# æ€§èƒ½æµ‹è¯•
go test -bench=. -benchmem ./benchmarks/...

# æŸ¥çœ‹åˆ†é…
go test -bench=. -benchmem -memprofile=mem.out
go tool pprof mem.out

# GC åˆ†æ
GODEBUG=gctrace=1 go run main.go
```

### ç¯å¢ƒå˜é‡

```bash
# OTLP Endpoint
export OTEL_EXPORTER_OTLP_ENDPOINT="localhost:4317"

# Service Name
export OTEL_SERVICE_NAME="my-service"

# Sampling Rate
export OTEL_TRACES_SAMPLER="traceidratio"
export OTEL_TRACES_SAMPLER_ARG="0.1"

# Log Level
export OTEL_LOG_LEVEL="debug"

# Resource Attributes
export OTEL_RESOURCE_ATTRIBUTES="deployment.environment=production,service.version=1.0.0"
```

---

## ç›¸å…³æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£

- [00_Goç¼–ç¨‹æ¨¡å¼é›†æˆæ€»ç»“](./00_Goç¼–ç¨‹æ¨¡å¼é›†æˆæ€»ç»“_2025_10_09.md)
- [01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—](./01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—.md)
- [03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](./03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ.md)

### é«˜çº§æ¨¡å¼

- [31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ](./31_Goé«˜çº§å¹¶å‘æ¨¡å¼ä¸OTLPå®Œæ•´é›†æˆ.md)
- [32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ](./32_Goå‡½æ•°å¼ç¼–ç¨‹ä¸OTLPé›†æˆ.md)
- [33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­](./33_Goé«˜çº§é”™è¯¯å¤„ç†æ¨¡å¼ä¸Contextä¼ æ’­.md)
- [34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜](./34_Goå†…å­˜ç®¡ç†ä¸æ€§èƒ½è°ƒä¼˜å®æˆ˜.md)
- [35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼](./35_Goç”Ÿäº§çº§éƒ¨ç½²æ¨¡å¼ä¸åæ¨¡å¼.md)

### å¾®æœåŠ¡ä¸åˆ†å¸ƒå¼

- [36_Goå¾®æœåŠ¡é—´é€šä¿¡ä¸åˆ†å¸ƒå¼è¿½è¸ª](./36_Goå¾®æœåŠ¡é—´é€šä¿¡ä¸åˆ†å¸ƒå¼è¿½è¸ª.md)

### æ•°æ®å±‚é›†æˆ

- [37_Goæ•°æ®åº“ä¸ç¼“å­˜é›†æˆè¿½è¸ª](./37_Goæ•°æ®åº“ä¸ç¼“å­˜é›†æˆè¿½è¸ª.md)

### æµ‹è¯•ä¸å¯è§‚æµ‹æ€§

- [38_Goæµ‹è¯•ä¸å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ](./38_Goæµ‹è¯•ä¸å¯è§‚æµ‹æ€§æœ€ä½³å®è·µ.md)

### å®æˆ˜æ¡ˆä¾‹

- [39_å®æˆ˜æ¡ˆä¾‹_ç”µå•†å¾®æœåŠ¡ç³»ç»Ÿ](./39_å®æˆ˜æ¡ˆä¾‹_ç”µå•†å¾®æœåŠ¡ç³»ç»Ÿ.md)
- [40_å®æˆ˜æ¡ˆä¾‹_è®¢å•æ”¯ä»˜åº“å­˜é›†æˆ](./40_å®æˆ˜æ¡ˆä¾‹_è®¢å•æ”¯ä»˜åº“å­˜é›†æˆ.md)
- [41_å®æˆ˜æ¡ˆä¾‹_API Gatewayä¸æœåŠ¡é›†æˆ](./41_å®æˆ˜æ¡ˆä¾‹_API Gatewayä¸æœåŠ¡é›†æˆ.md)
- [42_å®æˆ˜æ¡ˆä¾‹_é‡‘èäº¤æ˜“ç³»ç»Ÿ](./42_å®æˆ˜æ¡ˆä¾‹_é‡‘èäº¤æ˜“ç³»ç»Ÿ.md)
- [43_å®æˆ˜æ¡ˆä¾‹_2PCä¸å®¡è®¡æ—¥å¿—](./43_å®æˆ˜æ¡ˆä¾‹_2PCä¸å®¡è®¡æ—¥å¿—.md)

### æ¡†æ¶é›†æˆ1

- [09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—](./09_Goä¸»æµæ¡†æ¶æ·±åº¦é›†æˆæŒ‡å—.md)
- [04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ](./04_Go_HTTP_2_3å®Œæ•´é›†æˆæ–¹æ¡ˆ.md)

---

## æ–‡æ¡£ä½“ç³»æ€»è§ˆ

### ğŸ“š å®Œæ•´æ–‡æ¡£åˆ—è¡¨

#### åŸºç¡€é›†æˆï¼ˆ3 ä¸ªæ–‡æ¡£ï¼‰

1. **00_Goç¼–ç¨‹æ¨¡å¼é›†æˆæ€»ç»“** - æ€»ä½“æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹
2. **01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—** - Go 1.25.1 + OTLP åŸºç¡€é›†æˆ
3. **03_Goæ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ** - æ€§èƒ½ä¼˜åŒ–æŒ‡å—

#### é«˜çº§ç¼–ç¨‹æ¨¡å¼ï¼ˆ5 ä¸ªæ–‡æ¡£ï¼‰

1. **31_Goé«˜çº§å¹¶å‘æ¨¡å¼** - Channelã€WorkerPoolã€Pipelineã€Fan-Out/Fan-In
2. **32_Goå‡½æ•°å¼ç¼–ç¨‹** - Map/Filter/Reduceã€é«˜é˜¶å‡½æ•°ã€Monad
3. **33_Goé«˜çº§é”™è¯¯å¤„ç†** - TracedErrorã€Contextä¼ æ’­ã€æ¢å¤ç­–ç•¥
4. **34_Goå†…å­˜ç®¡ç†** - å¯¹è±¡æ± ã€GCè°ƒä¼˜ã€é›¶åˆ†é…æŠ€æœ¯
5. **35_Goç”Ÿäº§çº§éƒ¨ç½²** - ä¼˜é›…å…³é—­ã€å¥åº·æ£€æŸ¥ã€åæ¨¡å¼

#### å¾®æœåŠ¡ä¸åˆ†å¸ƒå¼ï¼ˆ1 ä¸ªæ–‡æ¡£ï¼‰

1. **36_Goå¾®æœåŠ¡é—´é€šä¿¡** - HTTPã€gRPCã€Kafkaã€NATSã€Sagaã€2PC

#### æ•°æ®å±‚é›†æˆï¼ˆ1 ä¸ªæ–‡æ¡£ï¼‰

1. **37_Goæ•°æ®åº“ä¸ç¼“å­˜** - SQLã€NoSQLã€ORMã€Redisã€è¿æ¥æ± ç›‘æ§

#### æµ‹è¯•ä¸å¯è§‚æµ‹æ€§ï¼ˆ1 ä¸ªæ–‡æ¡£ï¼‰

1. **38_Goæµ‹è¯•ä¸å¯è§‚æµ‹æ€§** - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€æ··æ²Œå·¥ç¨‹

#### å®æˆ˜æ¡ˆä¾‹ï¼ˆ6 ä¸ªæ–‡æ¡£ï¼‰

1. **39_å®æˆ˜æ¡ˆä¾‹_ç”µå•†å¾®æœåŠ¡ç³»ç»Ÿ** - ç”¨æˆ·ã€å•†å“æœåŠ¡åŠå®Œæ•´æ¶æ„
2. **40_å®æˆ˜æ¡ˆä¾‹_è®¢å•æ”¯ä»˜åº“å­˜é›†æˆ** - è®¢å•ã€æ”¯ä»˜ã€åº“å­˜åŠSagaåˆ†å¸ƒå¼äº‹åŠ¡
3. **41_å®æˆ˜æ¡ˆä¾‹_API Gatewayä¸æœåŠ¡é›†æˆ** - APIç½‘å…³ã€ä¸­é—´ä»¶ã€æœåŠ¡é›†æˆ
4. **42_å®æˆ˜æ¡ˆä¾‹_é‡‘èäº¤æ˜“ç³»ç»Ÿ** - è´¦æˆ·ã€äº¤æ˜“ã€é£æ§æœåŠ¡
5. **43_å®æˆ˜æ¡ˆä¾‹_2PCä¸å®¡è®¡æ—¥å¿—** - ä¸¤é˜¶æ®µæäº¤ã€å®¡è®¡æ—¥å¿—ã€å¯¹è´¦æœåŠ¡
6. **44_å®Œæ•´éƒ¨ç½²æŒ‡å—_Dockerä¸Kubernetes** - Docker Composeã€K8séƒ¨ç½²

#### è¿ç»´ä¸è°ƒä¼˜ï¼ˆ3 ä¸ªæ–‡æ¡£ï¼‰

1. **45_æ•…éšœæ’æŸ¥ä¸è°ƒè¯•æŒ‡å—** - å¸¸è§é—®é¢˜ã€Traceè¯Šæ–­ã€æ€§èƒ½é—®é¢˜å®šä½
2. **46_æ€§èƒ½è°ƒä¼˜æ¡ˆä¾‹åˆ†æ** - 5ä¸ªçœŸå®æ¡ˆä¾‹ã€ä¼˜åŒ–å‰åå¯¹æ¯”
3. **47_å¿«é€Ÿå‚è€ƒå¡ç‰‡** - APIé€ŸæŸ¥ã€å‘½ä»¤é€ŸæŸ¥ã€é…ç½®é€ŸæŸ¥

#### æ¡†æ¶é›†æˆï¼ˆ2 ä¸ªæ–‡æ¡£ï¼‰

1. **09_Goä¸»æµæ¡†æ¶** - Ginã€Echoã€Fiberã€Chi
2. **04_Go_HTTP_2_3** - HTTP/2ã€HTTP/3ã€QUIC

#### æ€»ç»“æ–‡æ¡£ï¼ˆ2 ä¸ªæ–‡æ¡£ï¼‰

1. **å·¥ä½œå®Œæˆæ€»ç»“_2025_10_09** - é˜¶æ®µæ€§å·¥ä½œæ€»ç»“
2. **48_é¡¹ç›®æœ€ç»ˆæ€»ç»“_2025_10_11** - â­ å®Œæ•´é¡¹ç›®æ€»ç»“ã€ç»Ÿè®¡æ•°æ®ã€å­¦ä¹ è·¯å¾„

### ğŸ“Š æ–‡æ¡£ç»Ÿè®¡

- **æ€»æ–‡æ¡£æ•°é‡ï¼š** 48 ä¸ªæ ¸å¿ƒæ–‡æ¡£
- **ä»£ç ç¤ºä¾‹ï¼š** 300+ ä¸ªå®Œæ•´ç¤ºä¾‹
- **ä»£ç è¡Œæ•°ï¼š** 25,000+ è¡Œç”Ÿäº§çº§ä»£ç 
- **è¦†ç›–æ¨¡å¼ï¼š** 60+ ç§ç¼–ç¨‹æ¨¡å¼
- **é›†æˆåº“ï¼š** 35+ ä¸ªä¸»æµåº“
- **æœ€ä½³å®è·µï¼š** 150+ æ¡å®è·µå»ºè®®
- **å®æˆ˜æ¡ˆä¾‹ï¼š** 2 ä¸ªå®Œæ•´ç³»ç»Ÿï¼ˆç”µå•†ã€é‡‘èï¼‰
- **æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹ï¼š** 5 ä¸ªè¯¦ç»†æ¡ˆä¾‹ï¼ˆAPIå»¶è¿Ÿã€å†…å­˜ã€æ•°æ®åº“ã€å¹¶å‘ã€GCï¼‰

---

## æ€»ç»“

æœ¬ç´¢å¼•æä¾›äº†å®Œæ•´çš„ Go ç¼–ç¨‹æ¨¡å¼ä¸ OTLP é›†æˆæ–‡æ¡£çš„å¯¼èˆªï¼Œæ¶µç›–ï¼š

âœ… **48 ä¸ªæ ¸å¿ƒæ–‡æ¡£** - ä»åŸºç¡€åˆ°é«˜çº§å…¨è¦†ç›–  
âœ… **10+ ä¸ªé¢†åŸŸ** - å¹¶å‘ã€å‡½æ•°å¼ã€é”™è¯¯å¤„ç†ã€å†…å­˜ã€éƒ¨ç½²ã€å¾®æœåŠ¡ã€æ•°æ®å±‚ã€æµ‹è¯•ã€å®æˆ˜æ¡ˆä¾‹ã€è¿ç»´è°ƒä¼˜  
âœ… **å®Œæ•´çš„å­¦ä¹ è·¯å¾„** - 9 å‘¨è¿›é˜¶è®¡åˆ’  
âœ… **å¿«é€Ÿå‚è€ƒ** - ä»£ç ç‰‡æ®µã€å‘½ä»¤ã€é…ç½®é€ŸæŸ¥  
âœ… **25,000+ è¡Œä»£ç ** - ç”Ÿäº§çº§å®ç°  
âœ… **300+ ä»£ç ç¤ºä¾‹** - å®Œæ•´å¯è¿è¡Œ  
âœ… **150+ æœ€ä½³å®è·µ** - ç»è¿‡éªŒè¯çš„å»ºè®®  
âœ… **2 ä¸ªå®Œæ•´ç³»ç»Ÿ** - ç”µå•†å¾®æœåŠ¡ç³»ç»Ÿã€é‡‘èäº¤æ˜“ç³»ç»Ÿï¼ˆå«Sagaã€2PCã€å®¡è®¡æ—¥å¿—ã€å¯¹è´¦ï¼‰  
âœ… **5 ä¸ªä¼˜åŒ–æ¡ˆä¾‹** - APIå»¶è¿Ÿã€å†…å­˜ã€æ•°æ®åº“ã€å¹¶å‘ã€GCçš„çœŸå®ä¼˜åŒ–ç»éªŒ  
âœ… **å®Œæ•´å·¥å…·é“¾** - æ•…éšœæ’æŸ¥ã€æ€§èƒ½è°ƒä¼˜ã€å¿«é€Ÿå‚è€ƒ

å»ºè®®æŒ‰ç…§å­¦ä¹ è·¯å¾„å¾ªåºæ¸è¿›ï¼Œç»“åˆå®é™…é¡¹ç›®è¿›è¡Œå®è·µã€‚æ‰€æœ‰æ–‡æ¡£éƒ½åŒ…å«å®Œæ•´çš„ä»£ç ç¤ºä¾‹ã€è¯¦ç»†çš„è¯´æ˜å’Œå®æˆ˜å»ºè®®ã€‚æ–°å¢çš„å®æˆ˜æ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨çœŸå®åœºæ™¯ä¸­åº”ç”¨æ‰€æœ‰å­¦åˆ°çš„æ¨¡å¼å’ŒæŠ€æœ¯ã€‚

### ğŸ¯ æ¨èé˜…è¯»é¡ºåº

**å¿«é€Ÿå…¥é—¨** (1-2å¤©):

1. 48_é¡¹ç›®æœ€ç»ˆæ€»ç»“_2025_10_11.md - äº†è§£å…¨è²Œ
2. 47_å¿«é€Ÿå‚è€ƒå¡ç‰‡.md - é€ŸæŸ¥å¸¸ç”¨API
3. 01_Go_1.25.1_å®Œæ•´é›†æˆæŒ‡å—.md - å¿«é€Ÿä¸Šæ‰‹

**æ·±å…¥å­¦ä¹ ** (1-2å‘¨):

1. é«˜çº§æ¨¡å¼ç³»åˆ— (31-35)
2. å¾®æœåŠ¡ç³»åˆ— (36-38)
3. å®æˆ˜æ¡ˆä¾‹ç³»åˆ— (39-44)

**ç”Ÿäº§ä¼˜åŒ–** (æŒç»­):

1. 45_æ•…éšœæ’æŸ¥ä¸è°ƒè¯•æŒ‡å—.md
2. 46_æ€§èƒ½è°ƒä¼˜æ¡ˆä¾‹åˆ†æ.md

---

**æœ€åæ›´æ–°ï¼š** 2025-10-11  
**ç‰ˆæœ¬ï¼š** v2.0.0  
**ä½œè€…ï¼š** OTLP Go Integration Team
