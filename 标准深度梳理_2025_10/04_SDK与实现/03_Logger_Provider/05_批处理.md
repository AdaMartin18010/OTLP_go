# æ—¥å¿—æ‰¹å¤„ç†

## ðŸ“‹ ç›®å½•

- [æ—¥å¿—æ‰¹å¤„ç†](#æ—¥å¿—æ‰¹å¤„ç†)
  - [ðŸ“‹ ç›®å½•](#-ç›®å½•)
  - [æ¦‚è¿°](#æ¦‚è¿°)
  - [æ‰¹å¤„ç†é…ç½®](#æ‰¹å¤„ç†é…ç½®)
  - [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
  - [æœ€ä½³å®žè·µ](#æœ€ä½³å®žè·µ)
  - [å‚è€ƒèµ„æº](#å‚è€ƒèµ„æº)

---

## æ¦‚è¿°

**æ‰¹å¤„ç†** å°†å¤šæ¡æ—¥å¿—èšåˆåŽæ‰¹é‡å¯¼å‡ºï¼Œæé«˜æ€§èƒ½å’Œæ•ˆçŽ‡ã€‚

```text
æ—¥å¿— 1, 2, 3, 4, 5...
    â†“ (èšåˆ)
æ‰¹æ¬¡ [1,2,3,4,5]
    â†“
æ‰¹é‡å¯¼å‡º
```

---

## æ‰¹å¤„ç†é…ç½®

```go
processor := log.NewBatchProcessor(
    exporter,
    // æ‰¹å¤„ç†è¶…æ—¶: 5ç§’
    log.WithBatchTimeout(5*time.Second),
    
    // æœ€å¤§æ‰¹æ¬¡å¤§å°: 512æ¡
    log.WithExportMaxBatchSize(512),
    
    // æœ€å¤§é˜Ÿåˆ—å¤§å°: 2048æ¡
    log.WithMaxQueueSize(2048),
    
    // å¯¼å‡ºè¶…æ—¶: 30ç§’
    log.WithExportTimeout(30*time.Second),
)
```

**å‚æ•°è¯´æ˜Ž**:

```text
BatchTimeout:
- é»˜è®¤: 5ç§’
- æŽ¨è: 1-10ç§’
- è¾¾åˆ°æ—¶é—´åŽå¯¼å‡º

ExportMaxBatchSize:
- é»˜è®¤: 512
- æŽ¨è: 256-1024
- è¾¾åˆ°å¤§å°åŽç«‹å³å¯¼å‡º

MaxQueueSize:
- é»˜è®¤: 2048
- æŽ¨è: 1024-4096
- é˜Ÿåˆ—æ»¡æ—¶ä¸¢å¼ƒæ–°æ—¥å¿—

ExportTimeout:
- é»˜è®¤: 30ç§’
- æŽ¨è: 10-30ç§’
- å•æ¬¡å¯¼å‡ºæœ€å¤§æ—¶é—´
```

---

## æ€§èƒ½ä¼˜åŒ–

```go
// 1. æ ¹æ®æ—¥å¿—é¢‘çŽ‡è°ƒæ•´
// é«˜é¢‘ (>100 logs/s)
log.WithBatchTimeout(1*time.Second)
log.WithExportMaxBatchSize(1024)

// ä¸­é¢‘ (10-100 logs/s)
log.WithBatchTimeout(5*time.Second)
log.WithExportMaxBatchSize(512)

// ä½Žé¢‘ (<10 logs/s)
log.WithBatchTimeout(10*time.Second)
log.WithExportMaxBatchSize(256)

// 2. å†…å­˜ä¼°ç®—
// Memory â‰ˆ MaxQueueSize Ã— AvgLogSize
// ä¾‹å¦‚: 2048 Ã— 2KB = ~4MB
```

---

## æœ€ä½³å®žè·µ

```go
// âœ… ç”Ÿäº§çŽ¯å¢ƒé…ç½®
processor := log.NewBatchProcessor(exporter,
    log.WithBatchTimeout(5*time.Second),
    log.WithMaxQueueSize(2048),
    log.WithExportMaxBatchSize(512),
)

// âœ… ç›‘æŽ§é˜Ÿåˆ—
// å¦‚æžœæ—¥å¿—ä¸¢å¤±ï¼Œè€ƒè™‘å¢žåŠ é˜Ÿåˆ—å¤§å°
log.WithMaxQueueSize(4096)

// âœ… æ ¹æ®åœºæ™¯è°ƒæ•´
// å®žæ—¶æ€§è¦æ±‚é«˜: å° timeout
log.WithBatchTimeout(1*time.Second)

// å®žæ—¶æ€§è¦æ±‚ä½Ž: å¤§ timeout
log.WithBatchTimeout(10*time.Second)
```

---

## å‚è€ƒèµ„æº

- [03_å¤„ç†å™¨.md](./03_å¤„ç†å™¨.md)
- [04_å¯¼å‡ºå™¨.md](./04_å¯¼å‡ºå™¨.md)

---

**ðŸŽ‰ å®Œæˆï¼æ—¥å¿—æ‰¹å¤„ç†çŸ¥è¯†æŽŒæ¡ï¼**

**ðŸŽŠðŸŽŠðŸŽŠ Phase 4.3: Logger Provider å…¨éƒ¨å®Œæˆï¼ðŸŽŠðŸŽŠðŸŽŠ**-
